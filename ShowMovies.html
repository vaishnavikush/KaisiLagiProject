<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KaiSI LagI - Premium Movie Reviews & Ratings</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Crimson+Text:wght@600;700&family=Monoton&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>


  <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    :root {
--primary: #f57420;          /* Bright / Cinematic Orange */
--primary-light: #ff8a3d;    /* Lighter Orange */

--accent: #cc3333;           /* Strong / Crimson Red */
--accent-light: #e04b4b;     /* Lighter Crimson */

--gold: #f57420;             /* Orange instead of gold */

--success: #10B981;

--bg-main: #F8FAFC;
--bg-card: #FFFFFF;
--bg-hover: #F1F5F9;

--text-primary: #1E293B;
--text-secondary: #475569;
--text-light: #64748B;

--border: #E2E8F0;

--shadow-sm: 0 2px 8px rgba(204, 51, 51, 0.15);
--shadow-md: 0 4px 16px rgba(204, 51, 51, 0.25);
--shadow-lg: 0 8px 24px rgba(204, 51, 51, 0.35);
--shadow-xl: 0 12px 32px rgba(204, 51, 51, 0.45);
}


  body {
background: linear-gradient(135deg,#fff5ee 0%,rgba(245, 116, 32, 0.08) 50%, rgba(204, 51, 51, 0.06) 100%);
font-family: 'Outfit', sans-serif;
color: var(--text-primary);
line-height: 1.6;
-webkit-font-smoothing: antialiased;
overflow-x: hidden;
padding-top:90px;
}
<!--NAVBAR-->
.navbar {
        background-color: #f2481d;
        box-shadow: 0 2px 6px rgba(0,0,0,0.25);
        font-family: Outfit, sans-serif;
    }

    .navbar-brand {
        font-family: Monoton;
        letter-spacing: 3px;
        color: #fff !important;
        font-size: 1.5rem;
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
    }

    .nav-link {
        color: #fff !important;
        font-weight: 600;
    }

    .nav-link:hover {

        transform: translateY(-2px);
    }

    .nav-search:focus {
        box-shadow: 0 0 6px #ffbf00;
    }

    .btn-nav-custom {
        background: linear-gradient(45deg, #fcbe03, #ff6600);
        border: none;
        font-weight: 700;
    }

    .btn-nav-custom:hover {
        transform: scale(1.05);
    }
    .nav-link::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -6px;
  width: 0;
  height: 2px;
  background: #ffd700;
  transition: width 0.3s ease;
}

.nav-link:hover::after {
  width: 100%;
}

    .mobile-search {
        display: none;
        position: absolute;
        top: 64px;
        right: 16px;
        width: 260px;
        background: #fff;
        padding: 12px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.25);
        z-index: 2000;
    }

    @media (max-width: 991px) {
        .desktop-search { display: none !important; }
        .mobile-search-icon { display: inline-block; }
    }

    @media (min-width: 992px) {
        .mobile-search-icon { display: none; }
    }


    /* ========== SCROLL PROGRESS BAR ========== */
   .scroll-progress {
position: fixed;
top: 0;
left: 0;
width: 0%;
height: 4px;
background: linear-gradient(90deg, #cc3333, #f57420, #cc3333);
z-index: 9999;
transition: width 0.1s ease;
box-shadow: 0 0 20px rgba(204, 51, 51, 0.5);
}


    /* ========== FLOATING PARTICLES ========== */
  .particles-container {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
overflow: hidden;
pointer-events: none;
z-index: 1;
}

.particle {
position: absolute;
border-radius: 50%;
background: #cc3333; /* Crimson Red */
opacity: 0.1;
animation: floatParticle 15s infinite ease-in-out;
}

@keyframes floatParticle {
0%, 100% { transform: translateY(0) translateX(0) scale(1); opacity: 0.1; }
25% { transform: translateY(-30px) translateX(15px) scale(1.1); opacity: 0.2; }
50% { transform: translateY(-15px) translateX(-10px) scale(0.9); opacity: 0.15; }
75% { transform: translateY(-40px) translateX(20px) scale(1.05); opacity: 0.1; }
}

/* Gradient Orbs */
.gradient-orb {
position: absolute;
border-radius: 50%;
filter: blur(60px);
animation: orbFloat 20s infinite ease-in-out;
}

.gradient-orb-1 {
width: 400px;
height: 400px;
background: radial-gradient(
    circle,
    rgba(245, 116, 32, 0.15) 0%,
    transparent 70%
);
top: -100px;
left: -100px;
}

.gradient-orb-2 {
width: 300px;
height: 300px;
background: radial-gradient(
    circle,
    rgba(204, 51, 51, 0.12) 0%,
    transparent 70%
);
bottom: -50px;
right: -50px;
animation-delay: -10s;
}

@keyframes orbFloat {
0%, 100% { transform: translate(0, 0) scale(1); }
33% { transform: translate(30px, -30px) scale(1.1); }
66% { transform: translate(-20px, 20px) scale(0.95); }
}


    /* ========== HEADER ========== */
 .header {
background: linear-gradient(
    135deg,
    #ffffff 0%,
    rgba(245, 116, 32, 0.06) 50%,
    rgba(204, 51, 51, 0.05) 100%
);
position: relative;
padding: 4rem 0 6rem;
overflow: hidden;
border-bottom: 2px solid #cc3333;
box-shadow: var(--shadow-sm);
}

.header::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background:
    radial-gradient(circle at 20% 50%, rgba(245, 116, 32, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(204, 51, 51, 0.06) 0%, transparent 50%);
animation: headerBgFloat 15s ease-in-out infinite;
}

@keyframes headerBgFloat {
0%, 100% { transform: translateY(0px) scale(1); }
50% { transform: translateY(-15px) scale(1.02); }
}

/* Decorative Rotating Circles */
.decorative-circle {
position: absolute;
border: 2px solid;
border-radius: 50%;
opacity: 0.2;
}

.decorative-circle-1 {
width: 80px;
height: 80px;
border-color: #cc3333; /* Crimson */
top: 20px;
left: 30px;
animation: rotateCircle 20s linear infinite;
}

.decorative-circle-2 {
width: 120px;
height: 120px;
border-color: #f57420; /* Cinematic Orange */
bottom: 40px;
right: 50px;
animation: rotateCircle 25s linear infinite reverse;
}

.decorative-circle-3 {
width: 60px;
height: 60px;
border-color: #f57420;
top: 50%;
right: 10%;
animation: rotateCircle 15s linear infinite;
}

@keyframes rotateCircle {
from { transform: rotate(0deg); }
to { transform: rotate(360deg); }
}

.header-content {
position: relative;
z-index: 2;
text-align: center;
}

/* Logo Icon Animation */
.header-icon {
font-family:monoton;
font-weight: 500;
display: inline-block;
animation: iconBounce 3s ease-in-out infinite, iconPulse 2s ease-in-out infinite;
text-align:center;
}

@keyframes iconBounce {
0%, 100% { transform: translateY(0) rotate(0deg); }
25% { transform: translateY(-5px) rotate(-5deg); }
75% { transform: translateY(-5px) rotate(5deg); }
}

@keyframes iconPulse {
0%, 100% { filter: drop-shadow(0 0 0 transparent); }
50% { filter: drop-shadow(0 0 20px rgba(204, 51, 51, 0.5)); }
}

.header h1 {
text-align:center;
font-family: Monoton, sans-serif;
font-weight: 500;
font-size: 5rem;
word-spacing:20px;
letter-spacing:15px;
background: linear-gradient(
    135deg,
    #1E293B,
    #f57420,
    #cc3333
);
background-size: 200% 200%;
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 0.5rem;
letter-spacing: -2px;
animation: slideDown 0.8s ease-out, gradientShift 5s ease-in-out infinite;
}

@keyframes slideDown {
from { opacity: 0; transform: translateY(-60px) scale(0.8); }
to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes gradientShift {
0%, 100% { background-position: 0% 50%; }
50% { background-position: 100% 50%; }
}

.header-subtitle {
font-size: 1rem;
color: var(--text-secondary);
font-weight: 500;
letter-spacing: 3px;
text-transform: uppercase;
opacity: 0;
animation: fadeInUp 1s ease-out 0.4s forwards;
}




            /* ========== HEADER ACTION BUTTONS ========== */
  /* .header-actions {
display: flex;
gap: 1rem;
justify-content: center;
margin-top: 2.5rem;
opacity: 0;
animation: fadeInUp 1s ease-out 0.8s forwards;
}

.btn-header {
display: inline-flex;
align-items: center;
gap: 0.5rem;
padding: 0.85rem 1.75rem;
border-radius: 12px;
font-weight: 600;
font-size: 0.95rem;
text-decoration: none;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
position: relative;
overflow: hidden;
box-shadow: var(--shadow-md);
}

.btn-header::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
transition: left 0.6s ease;
}

.btn-header:hover::before {
left: 100%;
}

.btn-signin {
background: linear-gradient(135deg, #f57420, #ff8a3d);
color: white;
border: 2px solid transparent;
}

.btn-signin:hover {
transform: translateY(-3px) scale(1.05);
box-shadow: 0 8px 25px rgba(245, 116, 32, 0.45);
color: white;
}

.btn-leaderboard {
background: linear-gradient(135deg, #cc3333, #e04b4b);
color: white;
border: 2px solid transparent;
}

.btn-leaderboard:hover {
transform: translateY(-3px) scale(1.05);
box-shadow: 0 8px 25px rgba(204, 51, 51, 0.45);
color: white;
}

.btn-header i {
transition: transform 0.3s ease;
}

.btn-header:hover i {
transform: scale(1.2) rotate(5deg);
} */

/* Responsive */
@media (max-width: 576px) {
.header-actions {
    flex-direction: column;
    gap: 0.75rem;
}

.btn-header {
    width: 100%;
    justify-content: center;
}
}

@keyframes fadeInUp {
from { opacity: 0; transform: translateY(20px); }
to { opacity: 1; transform: translateY(0); }
}

.header-subtitle i {
color: #cc3333;
margin: 0 0.5rem;
animation: starSparkle 1.5s ease-in-out infinite;
}

.header-subtitle i:nth-child(2) {
animation-delay: 0.3s;
}

@keyframes starSparkle {
0%, 100% { opacity: 1; transform: scale(1) rotate(0deg); }
50% { opacity: 0.5; transform: scale(1.3) rotate(180deg); }
}

/* Typing cursor effect */
.typing-cursor {
display: inline-block;
width: 2px;
height: 1em;
background: #cc3333;
margin-left: 5px;
animation: blink 1s step-end infinite;
vertical-align: middle;
}

@keyframes blink {
50% { opacity: 0; }
}


    /* ========== SEARCH SECTION ========== */
   .search-section {
background: var(--bg-card);
border-radius: 20px;
padding: 2.5rem;
box-shadow: var(--shadow-lg);
border: 1px solid var(--border);
margin: -3rem auto 3rem auto;
position: relative;
z-index: 10;
max-width: 1140px;
opacity: 0;
transform: translateY(30px);
animation: searchSlideUp 0.8s ease-out 0.6s forwards;
}

@keyframes searchSlideUp {
to { opacity: 1; transform: translateY(0); }
}

.search-section::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 3px;
background: linear-gradient(90deg, #cc3333, #f57420, #cc3333);
background-size: 200% 100%;
border-radius: 20px 20px 0 0;
animation: shimmerLine 3s linear infinite;
}

@keyframes shimmerLine {
0% { background-position: -200% 0; }
100% { background-position: 200% 0; }
}

/* Focus glow effect */
.search-section.focused {
box-shadow: var(--shadow-xl), 0 0 40px rgba(204, 51, 51, 0.18);
border-color: #cc3333;
}

.input-with-icon {
position: relative;
}

.input-with-icon i {
position: absolute;
left: 1.25rem;
top: 50%;
transform: translateY(-50%);
color: var(--text-light);
font-size: 1rem;
transition: all 0.3s ease;
z-index: 2;
}

.form-control, .form-select {
background: var(--bg-main);
border: 2px solid var(--border);
color: var(--text-primary);
border-radius: 14px;
padding: 1rem 1.5rem 1rem 3.5rem;
font-size: 0.95rem;
font-weight: 500;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.form-control::placeholder {
color: var(--text-light);
}

.form-control:focus, .form-select:focus {
border-color: #f57420;
box-shadow: 0 0 0 4px rgba(245, 116, 32, 0.18);
outline: none;
background: var(--bg-hover);
transform: scale(1.02);
}

.form-control:focus + i,
.input-with-icon:focus-within i {
color: #f57420;
transform: translateY(-50%) scale(1.1);
}

.select-with-icon {
position: relative;
}

.select-with-icon i {
position: absolute;
left: 1.25rem;
top: 50%;
transform: translateY(-50%);
color: var(--text-light);
pointer-events: none;
z-index: 2;
transition: all 0.3s ease;
}


    /* ========== BUTTON ANIMATIONS ========== */
  .btn-primary {
background: linear-gradient(135deg, #cc3333, #f57420);
border: none;
border-radius: 14px;
padding: 1rem 2rem;
font-weight: 600;
font-size: 0.95rem;
letter-spacing: 0.5px;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
box-shadow: 0 4px 15px rgba(204, 51, 51, 0.45);
position: relative;
overflow: hidden;
}

.btn-primary::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
transition: left 0.6s ease;
}

.btn-primary:hover::before {
left: 100%;
}

.btn-primary:hover {
transform: translateY(-3px) scale(1.02);
box-shadow: 0 8px 30px rgba(245, 116, 32, 0.55);
}

.btn-primary:active {
transform: translateY(0) scale(0.98);
}

/* Ripple effect */
.btn-primary .ripple {
position: absolute;
border-radius: 50%;
background: rgba(255, 255, 255, 0.4);
transform: scale(0);
animation: rippleEffect 0.6s ease-out;
pointer-events: none;
}

@keyframes rippleEffect {
to { transform: scale(4); opacity: 0; }
}



    /* ========== AUTOCOMPLETE ========== */
  #autocompleteList {
list-style: none;
padding: 0.5rem 0;
margin: 0;
position: absolute;
top: calc(100% + 8px);
left: 0;
right: 0;
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 12px;
max-height: 280px;
overflow-y: auto;
z-index: 1500;
display: none;
box-shadow: var(--shadow-lg);
backdrop-filter: blur(10px);
opacity: 0;
transform: translateY(-10px);
transition: opacity 0.3s ease, transform 0.3s ease;
}

#autocompleteList.show {
display: block;
opacity: 1;
transform: translateY(0);
}

#autocompleteList li {
padding: 0.85rem 1rem 0.85rem 3.5rem;
cursor: pointer;
transition: all 0.2s ease;
position: relative;
font-size: 0.9rem;
color: var(--text-secondary);
opacity: 0;
transform: translateX(-10px);
animation: listItemSlide 0.3s ease-out forwards;
}

#autocompleteList li:nth-child(1) { animation-delay: 0.05s; }
#autocompleteList li:nth-child(2) { animation-delay: 0.1s; }
#autocompleteList li:nth-child(3) { animation-delay: 0.15s; }
#autocompleteList li:nth-child(4) { animation-delay: 0.2s; }
#autocompleteList li:nth-child(5) { animation-delay: 0.25s; }

@keyframes listItemSlide {
to { opacity: 1; transform: translateX(0); }
}

#autocompleteList li::before {
content: '\f002';
font-family: 'Font Awesome 6 Free';
font-weight: 900;
color: var(--text-light);
position: absolute;
left: 1.25rem;
font-size: 0.75rem;
transition: all 0.2s ease;
}

#autocompleteList li:hover {
background: linear-gradient(90deg, rgba(245, 116, 32, 0.12), transparent);
color: #cc3333;
padding-left: 4rem;
}

#autocompleteList li:hover::before {
color: #f57420;
transform: scale(1.2);
}


    /* ========== MOVIE CARDS ========== */
    .movie-grid {
        margin-top: 2rem;
    }

    .card {
        border: 1px solid var(--border);
        border-radius: 18px;
        overflow: hidden;
        background: var(--bg-card);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: var(--shadow-md);
        height: 100%;
        display: flex;
        flex-direction: column;
        position: relative;
        opacity: 0;
        transform: translateY(60px) scale(0.95);
    }

    .card.animate-in {
        animation: cardReveal 0.7s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }

    @keyframes cardReveal {
        to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .card:hover {
        transform: translateY(-15px) scale(1.02);
        box-shadow: var(--shadow-xl), 0 0 40px rgba(239, 68, 68, 0.1);
        border-color: var(--accent);
    }

    .carousel-wrapper {
        position: relative;
        background: linear-gradient(135deg, #1E293B, #0F172A);
        overflow: hidden;
        width: 100%;
        aspect-ratio: 16/9;
    }

    .carousel-wrapper::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(to top, rgba(15, 23, 42, 0.8), transparent);
        z-index: 2;
    }

    .carousel-inner {
        width: 100%;
        height: 100%;
    }

    .carousel-inner img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card:hover .carousel-inner img {
        transform: scale(1.1);
    }

    /* Quality Badge Animation */
    .quality-badge {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: linear-gradient(135deg, var(--accent), var(--accent-light));
        backdrop-filter: blur(10px);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        font-size: 0.75rem;
        font-weight: 700;
        letter-spacing: 1px;
        z-index: 3;
        box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        animation: badgePulse 2s ease-in-out infinite;
    }

    @keyframes badgePulse {
        0%, 100% { transform: scale(1); box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3); }
        50% { transform: scale(1.05); box-shadow: 0 6px 25px rgba(239, 68, 68, 0.5); }
    }

    /* Play button overlay */
    .play-overlay {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        width: 70px;
        height: 70px;
        background: rgba(239, 68, 68, 0.9);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 5;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        box-shadow: 0 0 30px rgba(239, 68, 68, 0.5);
    }

    .play-overlay i {
        color: white;
        font-size: 1.5rem;
        margin-left: 5px;
    }

    .card:hover .play-overlay {
        transform: translate(-50%, -50%) scale(1);
    }

    .play-overlay:hover {
        transform: translate(-50%, -50%) scale(1.1);
        background: var(--accent);
    }

    .card-body {
        padding: 2rem;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
    }

    .card-title {
        font-family: 'Crimson Text', serif;
        color: var(--text-primary);
        font-weight: 700;
        font-size: 1.5rem;
        margin-bottom: 1.25rem;
        line-height: 1.3;
        transition: color 0.3s ease;
    }

    .card:hover .card-title {
        color: var(--accent);
    }

    .info-row {
        display: flex;
        align-items: flex-start;
        margin-bottom: 0.85rem;
        font-size: 0.85rem;
        gap: 0.75rem;
        opacity: 0;
        transform: translateX(-10px);
    }

    .card.animate-in .info-row {
        animation: infoSlide 0.5s ease-out forwards;
    }

    .card.animate-in .info-row:nth-child(1) { animation-delay: 0.2s; }
    .card.animate-in .info-row:nth-child(2) { animation-delay: 0.3s; }
    .card.animate-in .info-row:nth-child(3) { animation-delay: 0.4s; }
    .card.animate-in .info-row:nth-child(4) { animation-delay: 0.5s; }

    @keyframes infoSlide {
        to { opacity: 1; transform: translateX(0); }
    }

    .info-row strong {
        color: var(--text-light);
        min-width: 90px;
        font-weight: 600;
    }

    .info-value {
        color: var(--text-secondary);
        font-weight: 500;
        flex: 1;
    }

    .btn-details {
        background: linear-gradient(135deg, var(--accent), var(--accent-light));
        color: white;
        border: none;
        border-radius: 12px;
        padding: 0.85rem 1.5rem;
        font-weight: 600;
        font-size: 0.9rem;
        letter-spacing: 0.5px;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        margin-top: auto;
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        position: relative;
        overflow: hidden;
    }

    .btn-details::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
        0% { left: -100%; }
        100% { left: 100%; }
    }

    .btn-details i {
        transition: transform 0.3s ease;
    }

    .btn-details:hover {
        transform: translateX(5px);
        box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
        color: white;
    }

    .btn-details:hover i {
        transform: translateX(5px);
        animation: arrowBounce 0.6s ease infinite;
    }

    @keyframes arrowBounce {
        0%, 100% { transform: translateX(5px); }
        50% { transform: translateX(10px); }
    }

    /* ========== LOADING SPINNER ========== */
   #loading {
text-align: center;
padding: 4rem 2rem;
display: none;
}

.spinner-container {
position: relative;
width: 60px;
height: 60px;
margin: 0 auto 1.5rem;
}

.spinner {
width: 60px;
height: 60px;
border: 4px solid #e5e7eb; /* changed border color from var(--border) */
border-top-color: #f57420; /* updated accent color */
border-radius: 50%;
animation: spin 1s linear infinite;
}

.spinner-inner {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: 40px;
height: 40px;
border: 3px solid transparent;
border-bottom-color: #ff914d; /* updated gold color */
border-radius: 50%;
animation: spin 1.5s linear infinite reverse;
}

@keyframes spin {
to { transform: rotate(360deg); }
}

.loading-text {
color: #9ca3af; /* updated text-secondary color */
font-weight: 600;
animation: loadingPulse 1.5s ease-in-out infinite;
}

@keyframes loadingPulse {
0%, 100% { opacity: 0.5; }
50% { opacity: 1; }
}

/* Loading dots animation */
.loading-dots::after {
content: '';
animation: loadingDots 1.5s infinite;
}

@keyframes loadingDots {
0% { content: ''; }
25% { content: '.'; }
50% { content: '..'; }
75% { content: '...'; }
}


    /* ========== NO RESULTS ========== */
   .no-results {
text-align: center;
padding: 6rem 2rem;
background: #f8fafc; /* updated from var(--bg-card) */
border-radius: 20px;
box-shadow: 0 4px 15px rgba(239, 68, 68, 0.1); /* updated shadow */
border: 1px solid #f1f5f9; /* updated border color */
animation: fadeInScale 0.6s ease-out;
}

@keyframes fadeInScale {
from { opacity: 0; transform: scale(0.9); }
to { opacity: 1; transform: scale(1); }
}

.no-results i {
font-size: 4rem;
color: #f57420; /* updated accent color */
margin-bottom: 2rem;
animation: noResultsBounce 2s ease-in-out infinite;
}

@keyframes noResultsBounce {
0%, 100% { transform: translateY(0); }
50% { transform: translateY(-15px); }
}

.no-results h3 {
font-family: 'Crimson Text', serif;
font-size: 2rem;
font-weight: 700;
color: #1e293b; /* updated text-primary color */
margin-bottom: 1rem;
}

.no-results p {
color: #6b7280; /* updated text-secondary color */
font-size: 1.05rem;
}


    /* ========== PAGE LOAD OVERLAY ========== */
  .page-loader {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: #f8fafc; /* updated bg-main */
display: flex;
align-items: center;
justify-content: center;
z-index: 99999;
transition: opacity 0.5s ease, visibility 0.5s ease;
}

.page-loader.hidden {
opacity: 0;
visibility: hidden;
}

.page-loader-content {
text-align: center;
}

.page-loader-icon {
font-size: 4rem;
color: #ef4444; /* updated accent color */
animation: loaderSpin 2s ease-in-out infinite;
}

@keyframes loaderSpin {
0% { transform: rotateY(0deg); }
100% { transform: rotateY(360deg); }
}

.page-loader-text {
margin-top: 1.5rem;
font-size: 1.2rem;
color: #6b7280; /* updated text-secondary */
font-weight: 600;
}

.page-loader-bar {
width: 200px;
height: 4px;
background: #e2e8f0; /* updated border */
border-radius: 2px;
margin: 1rem auto 0;
overflow: hidden;
}

.page-loader-bar-inner {
width: 0%;
height: 100%;
background: linear-gradient(90deg, #ef4444, #fbbf24); /* updated accent â†’ gold */
border-radius: 2px;
animation: loaderBar 1.5s ease-out forwards;
}

@keyframes loaderBar {
to { width: 100%; }
}

/* ========== RESPONSIVE ========== */
@media (max-width: 768px) {
.header h1 {
    font-size: 3.5rem;
}

.header {
    padding: 3rem 0 5rem;
}

.search-section {
    padding: 1.5rem;
    margin: -2.5rem 1rem 2rem 1rem;
}

.card-title {
    font-size: 1.3rem;
}

.decorative-circle-1,
.decorative-circle-2,
.decorative-circle-3 {
    display: none;
}
}

@media (max-width: 576px) {
.header h1 {
    font-size: 2.5rem;
}

.header-subtitle {
    font-size: 0.85rem;
    letter-spacing: 2px;
}

.card-body {
    padding: 1.5rem;
}

.card-title {
    font-size: 1.15rem;
    margin-bottom: 1rem;
}

.info-row {
    font-size: 0.8rem;
}
}


    /* ========== SCROLLBAR ========== */
  /* Custom Scrollbar */
::-webkit-scrollbar {
width: 10px;
}

::-webkit-scrollbar-track {
background: #f8fafc; /* updated bg-main */
}

::-webkit-scrollbar-thumb {
background: linear-gradient(135deg, #ef4444, #fbbf24); /* updated accent â†’ gold */
border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
background: #f87171; /* updated accent-light */
}

/* Container */
.container {
max-width: 1200px;
}


    /* ========== SECTION TITLE ========== */
  .section-title {
display: flex;
align-items: center;
gap: 1rem;
margin-bottom: 2rem;
opacity: 0;
transform: translateX(-30px);
animation: sectionTitleSlide 0.6s ease-out 1s forwards;
}

@keyframes sectionTitleSlide {
to { opacity: 1; transform: translateX(0); }
}

.section-title h2 {
font-family: 'Crimson Text', serif;
font-size: 1.8rem;
font-weight: 700;
color: #1e293b; /* text-primary */
margin: 0;
}

.section-title i {
color: #ef4444; /* accent */
animation: iconRotate 3s linear infinite;
}

@keyframes iconRotate {
from { transform: rotate(0deg); }
to { transform: rotate(360deg); }
}

.section-title-line {
flex: 1;
height: 2px;
background: linear-gradient(90deg, #e2e8f0, transparent); /* border â†’ #e2e8f0 */
}

  </style>
</head>
<!--NAVBAR-->
<nav class="navbar navbar-expand-lg fixed-top"
style="background-color: #f2481d;">
  <div class="container-fluid">

    <img th:src="@{/images/logo2.jpg}" width="52" height="52"
         class="rounded-circle" alt="logo">

    <a class="navbar-brand ms-2"> KAISI LAGI</a>

    <!-- Mobile Search Icon -->
    <i class="fas fa-search text-white fs-4 ms-auto me-3 mobile-search-icon"
       id="mobileSearchToggle"></i>

    <button class="navbar-toggler border-0" type="button"
            data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <i class="fa fa-ellipsis-v text-light" aria-hidden="true"></i>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">

      <!-- Desktop Search -->
      <form class="desktop-search d-flex ms-auto me-3" onsubmit="return false;">
        <i class="fa fa-search" aria-hidden="true"
           style="color: #ffffff;
        margin: auto; margin-right: 10px;"></i>
        <input class="form-control nav-search"
               style="border: 2px solid #ffffff;
               border-radius: 25px;
               padding: 6px 12px;
               cursor: pointer;"
               type="search"
               placeholder="Search movies, people..."
               readonly
               id="searchTrigger">
      </form>

      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" th:href="@{/movies}">
            <!-- <i class="fas fa-house"></i> -->Home
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" th:href="@{/showpeoplerevi}">
            <!-- <i class="fas fa-star"></i> --> Leaderboard
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" th:href="@{/dashboard}">
            <!-- <i class="fa fa-dashboard" aria-hidden="true"></i>-->Dashboard
          </a>
        </li>
      </ul>

      <!-- Auth Buttons -->
      <a th:if="${session.loggedUser == null}"
         class="btn btn-nav-custom text-dark ms-lg-3 mt-2 mt-lg-0 "
         style="box-shadow: 0 4px 8px rgba(0,0,0,0.2);"
         th:href="@{/login}">
        Sign In
      </a>

      <a th:if="${session.loggedUser != null}"
         class="btn btn-nav-custom text-dark ms-lg-2 mt-2 mt-lg-0 rounded-circle"
         style="box-shadow: 0 4px 8px rgba(0,0,0,0.2);"
         th:href="@{/profile}">
        <i class="fa fa-user" aria-hidden="true"></i>
      </a>

    </div>
  </div>
</nav>

<!-- Mobile Search Box -->
<div class="mobile-search" id="mobileSearchBox">
  <form th:action="@{/search}" method="get">
    <input type="search" class="form-control mb-2"
           name="q" placeholder="Search movies, people...">
    <button class="btn btn-nav-custom w-100" type="submit">
      Search
    </button>
  </form>
</div>
<body>

<!-- Page Loader -->
<div class="page-loader" id="pageLoader">
  <div class="page-loader-content">
    <i class="fas fa-film page-loader-icon"></i>
    <p class="page-loader-text">Loading KaiSI LagI<span class="loading-dots"></span></p>
    <div class="page-loader-bar">
      <div class="page-loader-bar-inner"></div>
    </div>
  </div>
</div>

<div class="scroll-progress" id="scrollProgress"></div>


<!-- Header -->
<div class="header">
  <!-- Particles -->
  <div class="particles-container" id="particles"></div>

  <!-- Gradient Orbs -->
  <div class="gradient-orb gradient-orb-1"></div>
  <div class="gradient-orb gradient-orb-2"></div>

  <!-- Decorative Circles -->
  <div class="decorative-circle decorative-circle-1"></div>
  <div class="decorative-circle decorative-circle-2"></div>
  <div class="decorative-circle decorative-circle-3"></div>

  <div class="container header-content">
    <h1><i class="fas fa-film header-icon"></i> KaiSI LagI</h1>
    <p class="header-subtitle">
      <i class="fas fa-star"></i>
      <span id="typingText"></span><span class="typing-cursor"></span>
      <i class="fas fa-star"></i>
    </p>

    </div>
</div>

<div class="container">
  <!-- Search Section -->
  <div class="search-section" id="searchSection">
    <form id="searchForm" th:action="@{/movies}" method="get" class="row g-3 align-items-center">
      <div class="col-12 col-md-3">
        <div class="select-with-icon">
          <i class="fas fa-filter"></i>
          <select id="categorySelect" name="category" class="form-select">
            <option value="" th:selected="${param.category == null}">All Categories</option>
            <option value="Movie" th:selected="${param.category == 'Movie'}">ðŸŽ¬ Movies</option>
            <option value="Web Series" th:selected="${param.category == 'Web Series'}">ðŸ“º Web Series</option>
            <option value="TV Show" th:selected="${param.category == 'TV Show'}">ðŸ“¡ TV Shows</option>
          </select>
        </div>
      </div>

      <div class="col-12 col-md-6">
        <div class="input-with-icon">
          <i class="fas fa-search"></i>
          <input type="text" id="searchBox" name="q" class="form-control"
                 placeholder="Search by name, genre, language..."
                 th:value="${param.q != null ? param.q : ''}" autocomplete="off">
          <ul id="autocompleteList"></ul>
        </div>
      </div>

      <div class="col-12 col-md-3 ">
        <button type="submit" class="btn btn-primary w-100" id="searchBtn">
          <i class="fas fa-search"></i> Search
        </button>
      </div>
    </form>
  </div>
  <!-- Movie Grid -->
  <div id="movieContainer" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 movie-grid">
    <div class="col" th:each="movie, iterStat : ${movies}">
      <div class="card movie-card" th:data-index="${iterStat.index}">
        <div class="carousel-wrapper position-relative">
          <div th:id="'carousel-' + ${movie.movieId}" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
            <div class="carousel-inner">
              <div th:each="img,imgStat : ${movie.imageIds}" th:classappend="${imgStat.index==0}? 'active':''" class="carousel-item">
                <img th:src="@{'/images/' + ${img}}" class="d-block w-100" th:alt="${movie.movieName}">
              </div>
<!--              <div th:if="${#lists.isEmpty(movie.imageIds)}" class="carousel-item active">-->
<!--                <img th:src="@{/images/placeholder.jpg}" class="d-block w-100" alt="Placeholder">-->
              </div>
            </div>
          </div>
        </div>
        <div class="card-body">
          <h5 class="card-title" th:text="${movie.movieName}">Movie Name</h5>
          <div class="info-row" th:if="${movie.actors != null && !#lists.isEmpty(movie.actors)}">
            <strong><i class="fas fa-user me-1"></i>Actors:</strong>
            <span class="info-value" th:text="${T(java.lang.String).join(', ', movie.actors)}"></span>
          </div>
          <div class="info-row" th:if="${movie.actresses != null && !#lists.isEmpty(movie.actresses)}">
            <strong><i class="fas fa-user me-1"></i>Actresses:</strong>
            <span class="info-value" th:text="${T(java.lang.String).join(', ', movie.actresses)}"></span>
          </div>
<!--          <div class="info-row" th:if="${movie.directors != null && !#lists.isEmpty(movie.directors)}">-->
<!--            <strong><i class="fas fa-clapperboard me-1"></i>Directors:</strong>-->
<!--            <span class="info-value" th:text="${T(java.lang.String).join(', ', movie.directors)}"></span>-->
<!--          </div>-->
          <div class="info-row">
            <strong><i class="fas fa-calendar me-1"></i>Release:</strong>
            <span class="info-value" th:text="${#temporals.format(movie.releaseDate, 'dd-MM-yy')}"></span>
          </div>

          <a th:href="@{/movies/{movie_id}(movie_id=${movie.movieId})}">
            View Details <i class="fas fa-arrow-right"></i>
          </a>




        </div>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div id="loading">
    <div class="spinner-container">
      <div class="spinner"></div>
      <div class="spinner-inner"></div>
    </div>
    <h5 class="loading-text">Loading amazing movies<span class="loading-dots"></span></h5>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>

<!--  NAVBAR-->
document.getElementById('searchTrigger')?.addEventListener('click', () => {
      window.location.href = '/search';
  });

  document.getElementById('mobileSearchToggle')?.addEventListener('click', () => {
      window.location.href = '/search';
  });
  // ========== PAGE LOADER ==========
  window.addEventListener('load', function() {
      setTimeout(() => {
          document.getElementById('pageLoader').classList.add('hidden');
          initAnimations();
      }, 1800);
  });

  // ========== INITIALIZE ANIMATIONS ==========
  function initAnimations() {
      createParticles();
      initTypingEffect();
      initScrollAnimations();
      initSearchFocus();
      initButtonRipple();
  }

  // ========== FLOATING PARTICLES ==========
  function createParticles() {
      const container = document.getElementById('particles');
      const particleCount = 20;

      for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.width = `${Math.random() * 10 + 5}px`;
          particle.style.height = particle.style.width;
          particle.style.left = `${Math.random() * 100}%`;
          particle.style.top = `${Math.random() * 100}%`;
          particle.style.animationDelay = `${Math.random() * 5}s`;
          particle.style.animationDuration = `${Math.random() * 10 + 10}s`;
          container.appendChild(particle);
      }
  }

  // ========== TYPING EFFECT ==========
  function initTypingEffect() {
      const text = "DISCOVER â€¢ REVIEW â€¢ RATE";
      const typingElement = document.getElementById('typingText');
      let index = 0;

      function type() {
          if (index < text.length) {
              typingElement.textContent += text.charAt(index);
              index++;
              setTimeout(type, 80);
          }
      }

      setTimeout(type, 500);
  }

  // ========== SCROLL PROGRESS BAR ==========
  window.addEventListener('scroll', function() {
      const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
      const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrollPercent = (scrollTop / scrollHeight) * 100;
      document.getElementById('scrollProgress').style.width = scrollPercent + '%';
  });

  // ========== SCROLL ANIMATIONS (Intersection Observer) ==========
  function initScrollAnimations() {
      const cards = document.querySelectorAll('.card');

      const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry, index) => {
              if (entry.isIntersecting) {
                  const card = entry.target;
                  const cardIndex = parseInt(card.dataset.index) || 0;
                  setTimeout(() => {
                      card.classList.add('animate-in');
                  }, cardIndex * 100);
                  observer.unobserve(card);
              }
          });
      }, {
          threshold: 0.1,
          rootMargin: '0px 0px -50px 0px'
      });

      cards.forEach(card => observer.observe(card));
  }

  // ========== SEARCH SECTION FOCUS EFFECT ==========
  function initSearchFocus() {
      const searchSection = document.getElementById('searchSection');
      const inputs = searchSection.querySelectorAll('input, select');

      inputs.forEach(input => {
          input.addEventListener('focus', () => {
              searchSection.classList.add('focused');
          });
          input.addEventListener('blur', () => {
              searchSection.classList.remove('focused');
          });
      });
  }

  // ========== BUTTON RIPPLE EFFECT ==========
  function initButtonRipple() {
      const buttons = document.querySelectorAll('.btn-primary');

      buttons.forEach(button => {
          button.addEventListener('click', function(e) {
              const ripple = document.createElement('span');
              ripple.className = 'ripple';

              const rect = this.getBoundingClientRect();
              const size = Math.max(rect.width, rect.height);

              ripple.style.width = ripple.style.height = size + 'px';
              ripple.style.left = e.clientX - rect.left - size / 2 + 'px';
              ripple.style.top = e.clientY - rect.top - size / 2 + 'px';

              this.appendChild(ripple);

              setTimeout(() => ripple.remove(), 600);
          });
      });
  }

 // ========== AUTOCOMPLETE ==========

const searchBox = document.getElementById("searchBox");
const categorySelect = document.getElementById("categorySelect");
const autocompleteList = document.getElementById("autocompleteList");
const movieContainer = document.getElementById("movieContainer");

let currentPage = 0; // start from 0
let isLoading = false;
let finished = false;

// ========== AUTOCOMPLETE ==========
function hideAutocomplete() {
  autocompleteList.innerHTML = "";
  autocompleteList.classList.remove('show');
  setTimeout(() => autocompleteList.style.display = "none", 300);
}

function showAutocomplete() {
  autocompleteList.style.display = "block";
  setTimeout(() => autocompleteList.classList.add('show'), 10);
}

searchBox.addEventListener("input", function () {
  const term = this.value.trim();
  if (!term) return hideAutocomplete();

  const category = categorySelect.value || "";

  fetch("/autocomplete?term=" + encodeURIComponent(term) + "&category=" + encodeURIComponent(category))
      .then(res => res.json())
      .then(data => {
          autocompleteList.innerHTML = "";
          if (!data.length) return hideAutocomplete();

          data.forEach(item => {
              const li = document.createElement("li");
              li.textContent = item;
              li.classList.add("autocomplete-item"); // CSS class
              li.addEventListener("click", () => {
                  searchBox.value = item;
                  hideAutocomplete();
                  resetMovies();
                  updateURL();
              });
              autocompleteList.appendChild(li);
          });

          showAutocomplete();
      });
});

document.addEventListener("click", e => {
  if (!searchBox.contains(e.target) && !autocompleteList.contains(e.target)) hideAutocomplete();
});

// ========== CATEGORY CHANGE ==========
categorySelect.addEventListener("change", () => {
  hideAutocomplete();
  resetMovies();
  updateURL();
});

// ========== LOAD MOVIES ==========
async function loadMoreMovies() {
  if (isLoading || finished) return;
  isLoading = true;
  document.getElementById("loading").style.display = "block";

  const params = new URLSearchParams({ page: currentPage, q: searchBox.value, category: categorySelect.value });
  try {
      const res = await fetch("/movies/load?" + params.toString());
      if (!res.ok) throw new Error(res.status);
      const data = await res.json();

      if (!data.content || !data.content.length) finished = true;
      else appendMovies(data.content);

      currentPage++;
  } catch (err) { console.error(err); }
  isLoading = false;
  document.getElementById("loading").style.display = "none";
}

function appendMovies(movies) {
  movies.forEach((m, index) => {
      const div = document.createElement("div");
      div.classList.add("col", "mb-4");
      div.innerHTML = `
          <div class="card movie-card animate-in" data-index="${index}">
              <div class="carousel-wrapper position-relative">
                  <div id="carousel-${m.movieId}" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
                      <div class="carousel-inner">
                          ${m.imageIds && m.imageIds.length ? m.imageIds.map((img, idx) =>
                              `<div class="carousel-item ${idx===0?'active':''}">
                                  <img src="/images/${img}" class="d-block w-100" alt="${m.movieName}">
                              </div>`).join('') :
                              `<div class="carousel-item active">
                                  <img src="/images/placeholder.jpg" class="d-block w-100" alt="Placeholder">
                              </div>`}
                      </div>
                  </div>
              </div>
              <div class="card-body">
                  <h5 class="card-title">${m.movieName}</h5>
                  <div class="info-row"><strong>Actors:</strong> ${m.actors.join(", ") || "N/A"}</div>
                  <div class="info-row"><strong>Actresses:</strong> ${m.actresses.join(", ") || "N/A"}</div>
                  <div class="info-row"><strong>Directors:</strong> ${m.directors.join(", ") || "N/A"}</div>
                  <div class="info-row"><strong>Release:</strong> ${m.releaseDate || "N/A"}</div>
                  <a href="/movies/${m.movieId}" class="btn btn-primary mt-2">View Details</a>
              </div>
          </div>
      `;
      movieContainer.appendChild(div);

      // Animate cards
      const card = div.querySelector('.card');
      setTimeout(() => card.classList.add('animate-in'), index * 100);

      // Init carousel
      const carouselEl = div.querySelector(".carousel");
      if (carouselEl) new bootstrap.Carousel(carouselEl, { interval: 3000, ride: "carousel" });
  });
}

// ========== RESET MOVIES ==========
function resetMovies() {
  currentPage = 0;
  finished = false;
  movieContainer.innerHTML = "";
  loadMoreMovies();
}

// ========== UPDATE URL ==========
function updateURL() {
  const params = new URLSearchParams({ q: searchBox.value, category: categorySelect.value });
  history.pushState(null, '', '/movies?' + params.toString());
}

// ========== SEARCH FORM SUBMIT ==========
document.getElementById("searchForm").addEventListener("submit", e => {
  e.preventDefault();
  resetMovies();
  updateURL();
});

// ========== HANDLE BACK/FORWARD ==========
window.addEventListener("popstate", () => {
  const urlParams = new URLSearchParams(window.location.search);
  searchBox.value = urlParams.get('q') || '';
  categorySelect.value = urlParams.get('category') || '';
  resetMovies();
});

// ========== INFINITE SCROLL ==========
window.addEventListener("scroll", () => {
  const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
  const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
  if (scrollTop + window.innerHeight >= scrollHeight - 200) loadMoreMovies();
});

// ========== INITIAL LOAD ==========
document.addEventListener("DOMContentLoaded", () => {
  resetMovies();
});


  // ========== PARALLAX EFFECT ON HEADER ==========
  window.addEventListener('scroll', function() {
      const scrolled = window.pageYOffset;
      const header = document.querySelector('.header');
      const headerContent = document.querySelector('.header-content');

      if (scrolled < 500) {
          headerContent.style.transform = `translateY(${scrolled * 0.3}px)`;
          headerContent.style.opacity = 1 - (scrolled / 500);
      }
  });

  // ========== MOUSE MOVE EFFECT ON HEADER ==========
  document.querySelector('.header').addEventListener('mousemove', function(e) {
      const rect = this.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      const orbs = this.querySelectorAll('.gradient-orb');
      orbs.forEach((orb, index) => {
          const speed = (index + 1) * 0.02;
          const xMove = (x - rect.width / 2) * speed;
          const yMove = (y - rect.height / 2) * speed;
          orb.style.transform = `translate(${xMove}px, ${yMove}px)`;
      });
  });
</script>

</body>
</html>

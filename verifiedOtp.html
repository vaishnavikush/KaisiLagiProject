
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Account Verified - Kaisi Lagi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Arvo:ital,wght@0,400;0,700;1,400;1,700&family=Limelight&family=Monoton&family=Moo+Lah+Lah&family=Pacifico&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Rock+3D&display=swap"
        rel="stylesheet">
  <!-- Bootstrap & SweetAlert -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    body {
     font-family: 'Poppins', sans-serif;
      background-image: url('/images/bb.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }

    /* Hide body content initially - only show SweetAlert */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .loader {
      width: 60px;
      height: 60px;
      border: 5px solid rgba(255, 255, 255, 0.2);
      border-top-color: #fffc9e;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Confetti particles */
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      z-index: 1;
      pointer-events: none;
    }

    @keyframes confetti-fall {
      to {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }

    /* Custom SweetAlert styling */
    .swal2-popup {
      border-radius: 20px !important;
      padding: 30px !important;
    }

    .swal2-icon.swal2-success {
      border-color: #4ade80 !important;
    }

    .swal2-icon.swal2-success [class^='swal2-success-line'] {
      background-color: #4ade80 !important;
    }

    .swal2-icon.swal2-success .swal2-success-ring {
      border-color: rgba(74, 222, 128, 0.3) !important;
    }
  </style>
</head>

<body>

<!-- Simple loading screen (will be hidden when SweetAlert shows) -->
<div class="loading-screen" id="loadingScreen">
  <div class="loader"></div>
</div>

<script>
  (function() {
    // Hide loading screen
    document.getElementById('loadingScreen').style.display = 'none';

    // Create confetti animation
    function createConfetti() {
      const colors = ['#ffd700', '#ff6b9d', '#4ade80', '#60a5fa', '#f472b6', '#c084fc', '#fb923c'];
      const confettiCount = 50;

      for (let i = 0; i < confettiCount; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + 'vw';
          confetti.style.top = '-10px';
          confetti.style.width = (Math.random() * 8 + 6) + 'px';
          confetti.style.height = (Math.random() * 8 + 6) + 'px';
          confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
          confetti.style.animation = `confetti-fall ${Math.random() * 3 + 2}s linear forwards`;
          confetti.style.animationDelay = Math.random() * 0.3 + 's';
          confetti.style.opacity = Math.random() * 0.7 + 0.3;

          document.body.appendChild(confetti);

          setTimeout(() => confetti.remove(), 5000);
        }, i * 30);
      }
    }

    // Start confetti
    createConfetti();

    // Countdown variable
    let seconds = 3;

    // Show SweetAlert immediately
    Swal.fire({
      icon: 'success',
      title: '<span style="color: #1f2937; font-size: 28px; font-weight: 700;">OTP Verified Successfully!</span>',
      html: `
        <div style="margin-top: 15px;">
          <p style="font-size: 16px; color: #374151; margin-bottom: 15px; font-weight: 500;">
            âœ… Your account has been verified successfully
          </p>
          <p style="color: #6b7280; font-size: 14px; margin-bottom: 20px;">
            Welcome to the Kaisi Lagi community!
          </p>
          <div style="background: linear-gradient(135deg, #f3f4f6, #e5e7eb); padding: 15px; border-radius: 12px; margin-top: 20px;">
            <p style="margin: 0; color: #4b5563; font-size: 14px;">
              <i class="bi bi-arrow-right-circle" style="color: #3b82f6;"></i>
              Redirecting to login in <strong style="color: #dc2626; font-size: 20px;" id="countdown">3</strong> seconds...
            </p>
          </div>
        </div>
      `,
      confirmButtonColor: '#22c55e',
      confirmButtonText: '<i class="bi bi-box-arrow-in-right"></i> Go to Login Now',
      allowOutsideClick: false,
      allowEscapeKey: false,
      timer: 3000,
      timerProgressBar: true,
      width: '500px',
      padding: '40px',
      customClass: {
        popup: 'animate__animated animate__zoomIn animate__faster',
        confirmButton: 'btn-lg px-4 py-2'
      },
      didOpen: () => {
        // Update countdown every second
        const countdownEl = document.getElementById('countdown');
        const countdownInterval = setInterval(() => {
          seconds--;
          if (countdownEl) {
            countdownEl.textContent = seconds;
          }
          if (seconds <= 0) {
            clearInterval(countdownInterval);
          }
        }, 1000);
      }
    }).then((result) => {
      // Redirect when OK is clicked OR timer expires
      window.location.href = '/login';
    });

    // Prevent back navigation
    window.history.pushState(null, '', window.location.href);
    window.onpopstate = function() {
      window.history.pushState(null, '', window.location.href);
    };
  })();
</script>

<!-- Animate.css for smooth animations -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

</body>
</html>